version: v1.0
name: Knack ZeroBounce Wrapper
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Test ZeroBounce Wrapper
    task:
      secrets:
        - name: zerobounce
      jobs:
        - name: phpunit
          commands:
            - checkout
            - mv /home/semaphore/.env /home/semaphore/zerobounce/.env
            - docker-compose build
            - docker-compose up --abort-on-container-exit
            - cd ./tests/_output/ && bash <(curl -s https://codecov.io/bash)
